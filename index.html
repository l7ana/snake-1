<!DOCTYPE html>
<html>
<head>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser-arcade-physics.min.js"></script>
</head>
<body>

    <script>
    var config = {
        type: Phaser.AUTO,
        width: 800,
        height: 600,
        physics: {
            default: 'arcade'
        },
        scene: {
        preload: preload,
        create: create,
        update: update
        }
    };

    var cursors;
    var head;

    const game = new Phaser.Game(config);

    function preload ()
        {
            // this.load.setBaseURL('https://labs.phaser.io');

            // this.load.image('sky', 'assets/skies/space3.png');
            // this.load.image('logo', 'assets/sprites/phaser3-logo.png');
            // this.load.image('red', 'assets/particles/red.png');
            this.load.spritesheet('tail', 'sprites/TailSprite.png', {frameWidth: 50, frameHeight: 50});
            this.load.spritesheet('endtail', 'sprites/MiddleTailSprite.png', {frameWidth: 50, frameHeight: 50});
            this.load.spritesheet('middle', 'sprites/MiddleSprite.png', {frameWidth: 50, frameHeight: 50});
            this.load.spritesheet('endhead', 'sprites/MiddleHeadSprite.png', {frameWidth: 50, frameHeight: 50});
            this.load.spritesheet('head', 'sprites/HeadSprite.png', {frameWidth: 50, frameHeight: 50});
        }

    function create ()
        {
            this.add.image(400, 300, 'sky');
            const g1 = this.add.grid(400, 300, 800, 600, 50, 50, 0xffffff);

            const particles = this.add.particles(0, 0, 'red', {
                speed: 100,
                scale: { start: 1, end: 0 },
                blendMode: 'ADD'
            });

            // const logo = this.add.image(400, 100, 'logo');
            head = this.physics.add.sprite(400, 300, 'head');

            //  Our player animations, turning, walking left and walking right.
            this.anims.create({
                key: 'left',
                frames: this.anims.generateFrameNumbers('head', { start: 0, end: 1 }),
                frameRate: 6,
                repeat: -1
            });
            
            //  Input Events
            cursors = this.input.keyboard.createCursorKeys();

            // head.setInteractive({draggable: true});

            this.input.on('drag', (pointer, gameObject, dragX, dragY) => {
                dragX = Phaser.Math.Snap.To(dragX, 50);
                dragY = Phaser.Math.Snap.To(dragY, 50);

                gameObject.setPosition(dragX, dragY);
            })

            this.input.on('worldstep', (gameObject, dragX, dragY) => {
                dragX = Phaser.Math.Snap.To(dragX, 50);
                dragY = Phaser.Math.Snap.To(dragY, 50);

                gameObject.setPosition(dragX, dragY);
            })

            // logo.setVelocity(100, 200);
            // logo.setBounce(1, 1);
            // logo.setCollideWorldBounds(true);

            // particles.startFollow(logo);
        }

    function update () 
        {
            if (cursors.left.isDown)
            {
            // head.setPosition(-1);
            head.setVelocityX(-50);

            head.anims.play('left', true);
            }
        }

    // ,
    //     physics: {
    //         default: 'arcade',
    //         arcade: {
    //             gravity: { y: 200 }
    //         }
    //     }

    </script>

</body>
</html>